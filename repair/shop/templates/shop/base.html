{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <title>{% block title %}Clothes repair{% endblock %}</title>
    <link rel="shortcut icon" href="../media/static/ico.png"/>

    {% load static %}
    <link rel="stylesheet" href="{% static 'css/faq.css' %}">
    <link rel="stylesheet" href="{% static 'css/about.css' %}">
    <link rel="stylesheet" href="{% static 'css/reviews.css' %}">
    <link rel="stylesheet" href="{% static 'css/header.css' %}">
    <link rel="stylesheet" href="{% static 'css/news.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,700;1,300&family=Roboto:ital,wght@0,400;0,500;0,700;1,300&display=swap"
          rel="stylesheet">
</head>

<body>

<div class="wrapper">
    <header class="header">
        <a href="/" class="header-brand">Clothes repair</a>

        <nav class="navbar">
            <ul class="navbar-menu">
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/coupons">Coupons</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/faq">FAQ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/news">News</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/policy">Policy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/reviews">Reviews</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/vacancies">Vacancies</a>
                </li>
            </ul>
        </nav>
    </header>
</div>

<section class="partners__section">
    <div class="container">
        <h2 class="partners__title">Наши партнеры</h2>
        <div class="partners__list">
            <a class="partners-list__item" href="#">
                <img src="../../../media/merc.png" alt="mercedes" class="partners-item__img">
                <div class="partners-item__subtitle">Mercedes</div>
            </a>
            <a class="partners-list__item" href="#">
                <img src="../../../media/bmv.png" alt="bmw" class="partners-item__img">
                <div class="partners-item__subtitle">BMW</div>
            </a>
            <a class="partners-list__item" href="#">
                <img src="../../../media/chev.jpg" alt="chevrolet" class="partners-item__img">
                <div class="partners-item__subtitle">Chevrolet</div>
            </a>
        </div>
    </div>
</section>

<p>Date <span id="date"></span></p>
<p>Time <span id="time"></span></p>
<p>Time zone <span id="zone"></span></p>

<script>
    const today = new Date();
    const yyyy = today.getFullYear();
    let mm = today.getMonth() + 1; // Months start at 0!
    let dd = today.getDate();
    let h = today.getHours();
    if (h < 10)
        h = '0' + h;
    let min = today.getMinutes();
    if (min < 10)
        min = '0' + min;
    let sec = today.getSeconds();
    if (sec < 10)
        sec = '0' + sec;

    if (dd < 10) dd = '0' + dd;
    if (mm < 10) mm = '0' + mm;

    let formattedToday = dd + '/' + mm + '/' + yyyy;
    let time = h + ":" + min + ":" + sec;
    let tz = -(new Date().getTimezoneOffset() / 60);
    if (tz > 0) {
        tz = "+" + tz;
    }
    tz = "UTC" + tz;
    document.getElementById('date').innerHTML = formattedToday;
    document.getElementById('time').innerHTML = time;
    document.getElementById('zone').innerHTML = tz;


    function toggleUserInfo() {
        var userInfo = document.getElementById('userInfo');
        userInfo.style.display = userInfo.style.display === 'block' ? 'none' : 'block';
    }

    let menuBtn = document.querySelector('.user-toggle');
    let menu = document.querySelector('.user-info__list');
    let burgerMenu = document.querySelector('#burger-menu');
    menuBtn.addEventListener('click', function () {
        menu.classList.toggle('active');
        menuBtn.classList.toggle('active');
        burgerMenu.classList.toggle('active');
    })


    // Получаем ссылки на кнопку открытия модального окна и само модальное окно
    const openModalButton = document.getElementById('openModalBtn');
    const modal = document.getElementById('exampleModal');
    const closeModalButton = document.getElementById('btn-close-modal');

    // Функция открытия модального окна
    function openModal() {
        modal.style.display = 'block';
    }

    // Функция закрытия модального окна
    function closeModal() {
        modal.style.display = 'none';
    }

    // Назначаем обработчики событий на кнопку открытия и закрытия модального окна
    openModalButton.addEventListener('click', openModal);
    closeModalButton.addEventListener('click', closeModal);
    modal.addEventListener('click', function (event) {
        if (event.target === modal) {
            closeModal();
        }
    });

    // обработчик события на нажатие клавиши Escape для закрытия модального окна
    document.addEventListener('keydown', function (event) {
        if (event.key === 'Escape') {
            closeModal();
        }
    });
</script>

<div id="subheader">
    <div class="cart">
        {% if user.is_authenticated %}
            {% with total_items=cart|length %}
                {% if cart|length > 0 %}
                    Your cart:
                    <a href="{% url 'cart:cart_detail' %}">
                        {{ total_items }} item{{ total_items|pluralize }},
                        ${{ cart.get_total_price }}
                    </a>
                {% else %}
                    Your cart is empty.
                {% endif %}
            {% endwith %}
        {% endif %}
        {% if user.is_authenticated %}
            |{{ user.username }}|
            <a href="{% url 'login:logout' %}">Выйти</a>
        {% else %}
            <a href="{% url 'login:login' %}">Войти</a>
            <a href="{% url 'login:register' %}">Регистрация</a>
        {% endif %}
    </div>
</div>

<div id="content">
    {% block content %}
    {% endblock %}
</div>


<footer>
    <p>&copy; 2006 Clothes repair</p>
</footer>

</body>
</html>